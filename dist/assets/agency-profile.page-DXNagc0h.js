import{_ as b,a as u,o as d,b as a,e as C,F as w,p as y,n as V,t as l,D as $,E as L,f as p,u as n,s as g,z as A,B as I,r as _,m as E,A as U,i as R,g as k,l as F,y as S,k as T,G as N}from"./index-CE-419vR.js";const B={class:"star-rating"},M={class:"stars"},P={key:0,class:"pi pi-star-fill"},j={key:1,class:"pi pi-star-half"},D={key:2,class:"pi pi-star"},O={key:0,class:"rating-text"},q={__name:"StarRating",props:{rating:{type:Number,required:!0},showText:{type:Boolean,default:!1}},setup(r){return(t,v)=>(d(),u("div",B,[a("div",M,[(d(),u(w,null,y(5,o=>a("span",{key:o,class:V(["star",{filled:o<=Math.floor(r.rating),half:o===Math.ceil(r.rating)&&r.rating%1>=.5}])},[o<=Math.floor(r.rating)?(d(),u("i",P)):o===Math.ceil(r.rating)&&r.rating%1>=.5?(d(),u("i",j)):(d(),u("i",D))],2)),64))]),r.showText?(d(),u("span",O,l(r.rating.toFixed(1))+" de 5",1)):C("",!0)]))}},z=b(q,[["__scopeId","data-v-51115ae1"]]);class G{constructor({id:t,name:v,description:o,avatarUrl:c,rating:i,reviewCount:m,reservationCount:h,taxId:e,contact:s,socialLinks:f,reviews:x}){this.id=t,this.name=v,this.description=o,this.avatarUrl=c,this.rating=i,this.reviewCount=m,this.reservationCount=h,this.taxId=e,this.contact=s,this.socialLinks=f,this.reviews=x}}class W{static toEntityFromResource(t){return new G({id:t.id,name:t.name,description:t.description,avatarUrl:t.avatarUrl,rating:t.rating,reviewCount:t.reviewCount,reservationCount:t.reservationCount,taxId:t.taxId,contact:{email:t.contactEmail,phone:t.contactPhone},socialLinks:{facebook:t.socialLinksFacebook,instagram:t.socialLinksInstagram,whatsapp:t.socialLinksWhatsapp},reviews:[]})}static toEntitiesFromResponse(t){return t.status!==200?(console.error(`${t.status}, ${t.code}, ${t.message}`),[]):t.data.map(v=>this.toEntityFromResource(v))}static toRequestPayload(t){return{id:t.id,name:t.name,description:t.description,avatarUrl:t.avatarUrl,rating:t.rating,reviewCount:t.reviewCount,reservationCount:t.reservationCount,taxId:t.taxId,contactEmail:t.contact.email,contactPhone:t.contact.phone,socialLinksFacebook:t.socialLinks.facebook,socialLinksInstagram:t.socialLinks.instagram,socialLinksWhatsapp:t.socialLinks.whatsapp}}}const X={class:"agency-form"},H={class:"field"},J={for:"name"},K={class:"field"},Q={for:"description"},Y={class:"field"},Z={for:"avatar"},aa={class:"field"},sa={for:"phone"},ta={class:"field"},ea={for:"email"},oa={class:"field"},ia={for:"facebook"},la={class:"field"},na={for:"instagram"},ca={class:"field"},ra={for:"whatsapp"},da={class:"form-button-group"},ua={__name:"agency-form.component",props:{agency:Object},emits:["cancel","saved"],setup(r,{emit:t}){const v=r,o=t,{t:c}=$(),i=L({...v.agency});function m(){o("saved",W.toRequestPayload(i))}return(h,e)=>(d(),u("div",X,[a("div",H,[a("label",J,l(n(c)("createAgency.name")),1),p(n(g),{id:"name",modelValue:i.name,"onUpdate:modelValue":e[0]||(e[0]=s=>i.name=s),class:"input-text full-width"},null,8,["modelValue"])]),a("div",K,[a("label",Q,l(n(c)("createAgency.description")),1),A(a("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=s=>i.description=s),class:"input-textarea full-width",rows:"4"},null,512),[[I,i.description]])]),a("div",Y,[a("label",Z,l(n(c)("createAgency.img")),1),p(n(g),{id:"avatar",modelValue:i.avatarUrl,"onUpdate:modelValue":e[2]||(e[2]=s=>i.avatarUrl=s),class:"input-text full-width",placeholder:"https://..."},null,8,["modelValue"])]),a("div",aa,[a("label",sa,l(n(c)("createAgency.phone")),1),p(n(g),{id:"phone",modelValue:i.contact.phone,"onUpdate:modelValue":e[3]||(e[3]=s=>i.contact.phone=s),class:"input-text full-width",placeholder:"+51 987 654 321"},null,8,["modelValue"])]),a("div",ta,[a("label",ea,l(n(c)("createAgency.email")),1),p(n(g),{id:"email",modelValue:i.contact.email,"onUpdate:modelValue":e[4]||(e[4]=s=>i.contact.email=s),class:"input-text full-width",placeholder:"contacto@andesexplorer.pe"},null,8,["modelValue"])]),a("div",oa,[a("label",ia,l(n(c)("createAgency.facebook")),1),p(n(g),{id:"facebook",modelValue:i.socialLinks.facebook,"onUpdate:modelValue":e[5]||(e[5]=s=>i.socialLinks.facebook=s),class:"input-text full-width"},null,8,["modelValue"])]),a("div",la,[a("label",na,l(n(c)("createAgency.instagram")),1),p(n(g),{id:"instagram",modelValue:i.socialLinks.instagram,"onUpdate:modelValue":e[6]||(e[6]=s=>i.socialLinks.instagram=s),class:"input-text full-width"},null,8,["modelValue"])]),a("div",ca,[a("label",ra,l(n(c)("createAgency.whatsapp")),1),p(n(g),{id:"whatsapp",modelValue:i.socialLinks.whatsapp,"onUpdate:modelValue":e[7]||(e[7]=s=>i.socialLinks.whatsapp=s),class:"input-text full-width",placeholder:"https://wa.me/..."},null,8,["modelValue"])]),a("div",da,[a("button",{class:"form-button cancel",onClick:e[8]||(e[8]=s=>h.$emit("cancel"))},l(n(c)("experience.cancel")||"Cancelar"),1),a("button",{class:"form-button save",onClick:m},l(n(c)("experience.save")||"Guardar"),1)])]))}},pa=b(ua,[["__scopeId","data-v-3eb935ef"]]),va={class:"agency-profile"},ma={key:0,class:"loading-state"},fa={key:1,class:"error-state"},ga={key:2,class:"profile-content"},ha={class:"header"},_a={class:"header-info"},ka={class:"agency-name"},ba={class:"tax-id"},wa={class:"content-grid"},ya={class:"main-col"},$a={class:"about-section"},xa={class:"agency-description"},Ca={class:"certifications"},Va={class:"certification-chips"},La={class:"stats-section"},Aa={class:"stat-card"},Ia={class:"stat-value"},Ea={class:"stat-card"},Ua={class:"stat-value"},Ra={class:"stat-card"},Fa={class:"stat-value"},Sa={class:"side-col"},Ta=["src","alt"],Na={class:"contact-section"},Ba={class:"contact-info"},Ma={class:"contact-item"},Pa={class:"contact-value"},ja={class:"contact-item"},Da={class:"contact-value"},Oa={class:"contact-item"},qa={class:"contact-value"},za={class:"social-section"},Ga={class:"social-links"},Wa=["href"],Xa=["href"],Ha=["href"],Ja={__name:"agency-profile.page",setup(r){const{t}=$(),v=R(),o=_({id:"2",name:"Agencia EcoAventura",email:"agency@demo.com",avatar:"https://i.pravatar.cc/150?u=agency1",description:"Ofrecemos las mejores experiencias ecológicas para viajeros responsables y conscientes con el medio ambiente.",certifications:["Turismo Sostenible","Eco-Friendly Certificado"],contactInfo:{phone:"555-987-6543",address:"Av. Naturaleza 456, Ciudad Eco",email:"agency@demo.com"},socialLinks:{facebook:"facebook.com/ecoaventura",instagram:"instagram.com/ecoaventura_oficial",whatsapp:"555-987-6543"},rating:4.8,reviewCount:25,reservationCount:42,taxId:"ECOTAX987"}),c=_(!1),i=_(!1),m=_(null);E(async()=>{i.value=!0,m.value=null;try{const e=U.fromStorage();if(!(e!=null&&e.isValid())){await v.push("/login");return}if(!e.isAgency()){await v.push("/experiences");return}setTimeout(()=>{i.value=!1},500)}catch(e){console.error("Error loading agency data:",e),m.value=e.message||"Error al cargar el perfil",i.value=!1}});const h=async e=>{try{i.value=!0,await new Promise(s=>setTimeout(s,500)),Object.assign(o.value,e),c.value=!1}catch(s){console.error("Error saving changes:",s)}finally{i.value=!1}};return(e,s)=>(d(),u("div",va,[i.value?(d(),u("div",ma,s[3]||(s[3]=[a("i",{class:"pi pi-spinner pi-spin"},null,-1),k(" Cargando... ")]))):m.value?(d(),u("div",fa,[s[4]||(s[4]=a("i",{class:"pi pi-exclamation-triangle"},null,-1)),k(" "+l(m.value),1)])):(d(),u("div",ga,[a("div",ha,[a("div",_a,[a("h1",ka,l(o.value.name),1),a("span",ba,"RUC / NIT: "+l(o.value.taxId),1)]),a("button",{class:"edit-button",onClick:s[0]||(s[0]=f=>c.value=!0)},s[5]||(s[5]=[a("i",{class:"pi pi-pencil"},null,-1),k(" Editar perfil ")]))]),a("div",wa,[a("div",ya,[a("section",$a,[s[7]||(s[7]=a("h2",null,"Sobre nosotros",-1)),a("p",xa,l(o.value.description),1),a("div",Ca,[s[6]||(s[6]=a("h3",null,"Certificaciones",-1)),a("div",Va,[(d(!0),u(w,null,y(o.value.certifications,f=>(d(),T(n(N),{key:f,label:f,class:"certification-chip"},null,8,["label"]))),128))])])]),a("section",La,[a("div",Aa,[a("span",Ia,l(o.value.rating),1),p(z,{rating:o.value.rating,showValue:!1},null,8,["rating"]),s[8]||(s[8]=a("span",{class:"stat-label"},"Calificación",-1))]),a("div",Ea,[a("span",Ua,l(o.value.reviewCount),1),s[9]||(s[9]=a("span",{class:"stat-label"},"Reseñas",-1))]),a("div",Ra,[a("span",Fa,l(o.value.reservationCount),1),s[10]||(s[10]=a("span",{class:"stat-label"},"Reservas totales",-1))])])]),a("div",Sa,[a("img",{src:o.value.avatar,alt:o.value.name,class:"agency-logo"},null,8,Ta),a("section",Na,[s[17]||(s[17]=a("h2",null,"Información de contacto",-1)),a("div",Ba,[a("div",Ma,[s[12]||(s[12]=a("i",{class:"pi pi-phone"},null,-1)),a("div",null,[s[11]||(s[11]=a("span",{class:"contact-label"},"Teléfono",-1)),a("span",Pa,l(o.value.contactInfo.phone),1)])]),a("div",ja,[s[14]||(s[14]=a("i",{class:"pi pi-envelope"},null,-1)),a("div",null,[s[13]||(s[13]=a("span",{class:"contact-label"},"Email",-1)),a("span",Da,l(o.value.contactInfo.email),1)])]),a("div",Oa,[s[16]||(s[16]=a("i",{class:"pi pi-map-marker"},null,-1)),a("div",null,[s[15]||(s[15]=a("span",{class:"contact-label"},"Dirección",-1)),a("span",qa,l(o.value.contactInfo.address),1)])])])]),a("section",za,[s[21]||(s[21]=a("h2",null,"Redes sociales",-1)),a("div",Ga,[a("a",{href:"https://"+o.value.socialLinks.facebook,target:"_blank",class:"social-link facebook"},s[18]||(s[18]=[a("i",{class:"pi pi-facebook"},null,-1)]),8,Wa),a("a",{href:"https://"+o.value.socialLinks.instagram,target:"_blank",class:"social-link instagram"},s[19]||(s[19]=[a("i",{class:"pi pi-instagram"},null,-1)]),8,Xa),a("a",{href:"https://wa.me/"+o.value.socialLinks.whatsapp,target:"_blank",class:"social-link whatsapp"},s[20]||(s[20]=[a("i",{class:"pi pi-whatsapp"},null,-1)]),8,Ha)])])])])])),p(n(S),{visible:c.value,"onUpdate:visible":s[2]||(s[2]=f=>c.value=f),modal:"",header:"Editar perfil de agencia",style:{width:"500px"},closable:!i.value},{default:F(()=>[p(pa,{agency:o.value,onCancel:s[1]||(s[1]=f=>c.value=!1),onSaved:h},null,8,["agency"])]),_:1},8,["visible","closable"])]))}},Qa=b(Ja,[["__scopeId","data-v-0a78aa57"]]);export{Qa as default};
