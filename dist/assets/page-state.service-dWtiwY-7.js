import{H as n,r as i}from"./index-BPhHBPve.js";const l=n({experiences:{filters:{searchQuery:"",selectedType:"",selectedDifficulty:"",selectedPriceRange:"",onlyEcoFriendly:!1},scrollPosition:0,lastVisited:null,data:null},reservations:{scrollPosition:0,lastVisited:null,data:null,searchQuery:"",loading:!1,error:null},profile:{scrollPosition:0,lastVisited:null,data:null}});class c{constructor(){this.states=l,this.currentPage=i(null),this.isRestoring=i(!1)}savePageState(t,s){this.states[t]||(this.states[t]={}),Object.assign(this.states[t],s),this.states[t].lastVisited=Date.now();try{sessionStorage.setItem(`pageState_${t}`,JSON.stringify(s))}catch(r){console.warn("Error saving page state to sessionStorage:",r)}console.log(`[PageStateManager] Saved state for ${t}:`,s)}restorePageState(t){let s=this.states[t];if(!s||!s.lastVisited)try{const r=sessionStorage.getItem(`pageState_${t}`);r&&(s=JSON.parse(r),this.states[t]=s)}catch(r){console.warn("Error loading page state from sessionStorage:",r)}return console.log(`[PageStateManager] Restored state for ${t}:`,s),s||{}}clearPageState(t){this.states[t]&&(this.states[t]={}),sessionStorage.removeItem(`pageState_${t}`),console.log(`[PageStateManager] Cleared state for ${t}`)}clearAllStates(){Object.keys(this.states).forEach(t=>{this.states[t]={}}),Object.keys(sessionStorage).forEach(t=>{t.startsWith("pageState_")&&sessionStorage.removeItem(t)}),console.log("[PageStateManager] Cleared all states")}getPageState(t){return this.states[t]||{}}hasPageState(t){const s=this.states[t];return s&&s.lastVisited&&Date.now()-s.lastVisited<3e5}setRestoring(t){this.isRestoring.value=t}get isRestoringState(){return this.isRestoring.value}setCurrentPage(t){this.currentPage.value=t}get currentPageName(){return this.currentPage.value}saveScrollPosition(t,s){this.states[t]||(this.states[t]={}),this.states[t].scrollPosition=s}restoreScrollPosition(t){const s=this.states[t];s&&s.scrollPosition&&setTimeout(()=>{window.scrollTo(0,s.scrollPosition)},100)}handleNavigationError(t,s){console.error(`[PageStateManager] Navigation error for ${t}:`,s),this.clearPageState(t),this.setRestoring(!1);try{Object.keys(sessionStorage).forEach(o=>{o.startsWith(`pageState_${t}`)&&sessionStorage.removeItem(o)})}catch(r){console.warn("Error clearing sessionStorage:",r)}}savePageData(t,s){this.states[t]||(this.states[t]={}),this.states[t].data=s}getPageData(t){const s=this.states[t];return(s==null?void 0:s.data)||null}}const e=new c;function S(a){return{saveState:t=>e.savePageState(a,t),restoreState:()=>e.restorePageState(a),clearState:()=>e.clearPageState(a),hasState:()=>e.hasPageState(a),saveScroll:t=>e.saveScrollPosition(a,t),restoreScroll:()=>e.restoreScrollPosition(a),saveData:t=>e.savePageData(a,t),getData:()=>e.getPageData(a),isRestoring:()=>e.isRestoringState,setRestoring:t=>e.setRestoring(t),handleError:t=>e.handleNavigationError(a,t)}}export{S as u};
